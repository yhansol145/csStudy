## Cache Server

> Redis 와 같은 인메모리 데이터 구조 저장소를 사용하는 이유??
>

1. 데이터베이스는 데이터를 물리 디스크에 직접 쓰기 때문에 문제가 발생하여도 데이터가 손실되지 않는다.
2. 하지만 매번 디스크에 접근해야하기 때문에 사용자가 많아질수록 부하가 많아져 느려질 수 있다.
3. 서비스 운영 초기나 규모가 작은 서비스의 경우 WEB-WAS-DB 구조로도 데이터 베이스에 무리가 없다.
4. But! 사용자가 늘어나면 데이터베이스가 과부하 될수 있기 때문에 캐시서버를 도입하여 사용한다. 그리고 이 캐시서버로 사용할 수 있는것이 바로 Redis 이다.

- 캐시는 한번 읽어온 데이터를 임의 공간에 저장하여 다음에 읽을때는 빠르게 결과값을 받을 수 있도록 도와주는 공간
- 같은 요청이 여러번 들어오는 경우 매번 데이터베이스를 거치는 것이 아닌 캐시 서버에서 첫번째 요청 이후 저장된 결과값을 바로 내려주기 때문에 DB의 부하를 줄이고 서비스의 속도도 느려지지 않는 장점이 있다.

### 캐시서버의 패턴

- Look aside cache
    1. 클라이언트가 데이터를 요청
    2. 웹서버는 데이터가 존재하는지 캐시서버에 먼저 확인
    3. 캐시서버에 데이터가 있으면 DB에서 데이터를 조회하지 않고 캐시서버에 있는 결과값을 클라이언트에게 바로 반환 (Cache Hit)
    4. 캐시서버에 데이터가 없으면 DB에 데이터를 조회하여 캐시서버에 저장하고 결과값을 클라이언트에게 반환 (Cache Miss)

- Write Back
    1. 웹서버는 모든 데이터를 캐시 서버에 저장
    2. 캐시서버에 특정 시간동안 데이터가 저장됨
    3. 캐시서버에 있는 데이터를 DB에 저장
    4. DB에 저장된 캐시서버의 데이터를 삭제